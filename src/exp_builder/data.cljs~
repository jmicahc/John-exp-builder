(ns ^:figwheel-always exp-builder.data
    (:require [om.core :as om :include-macros true]))

(def state (atom {:components {:type :R
                                 :w 1
                                 :h 1
                                 :C [{:w 300
                                      :type :C
                                      :C [{:h 200
                                           :color "blue"
                                           :C []}
                                          {:h 200
                                           :color "green"
                                           :C []}]}
                                     {:w 100
                                      :type :C
                                      :C [{:h 200
                                           :color "yellow"
                                           :C []}
                                          {:h 200
                                           :color "purple"
                                           :C []}]}]}}))

(defn layout-partition [n x]
  {:pre (> n 1)}
  (into [] (map (fn [_] {x 1 :C []}) (range n))))

(defn row-partition [n]
  {:pre (> n 1)}
  (layout-partition n :w))


(defn components []
  (-> state
      (om/root-cursor)))
